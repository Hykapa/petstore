{"remainingRequest":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Hykapa\\Desktop\\new\\petstore\\src\\components\\Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\src\\components\\Main.vue","mtime":1648809483264},{"path":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648803307753},{"path":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\babel-loader\\lib\\index.js","mtime":1648803309109},{"path":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648803307753},{"path":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\vue-loader\\lib\\index.js","mtime":1648803309291}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJldmVyc2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBNeUhlYWRlciBmcm9tICIuL0hlYWRlci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImltYWluIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJvZHVjdHM6IHt9LAogICAgICBjYXJ0OiBbXQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIE15SGVhZGVyOiBNeUhlYWRlcgogIH0sCiAgbWV0aG9kczogewogICAgY2hlY2tSYXRpbmc6IGZ1bmN0aW9uIGNoZWNrUmF0aW5nKG4sIG15UHJvZHVjdCkgewogICAgICByZXR1cm4gbXlQcm9kdWN0LnJhdGluZyAtIG4gPj0gMDsKICAgIH0sCiAgICBhZGRUb0NhcnQ6IGZ1bmN0aW9uIGFkZFRvQ2FydChhUHJvZHVjdCkgewogICAgICB0aGlzLmNhcnQucHVzaChhUHJvZHVjdC5pZCk7CiAgICB9LAogICAgY2FuQWRkVG9DYXJ0OiBmdW5jdGlvbiBjYW5BZGRUb0NhcnQoYVByb2R1Y3QpIHsKICAgICAgLy9yZXR1cm4gdGhpcy5wcm9kdWN0LmF2YWlsYWJsZUludmVudG9yeSA+IHRoaXMuY2FydEl0ZW1Db3VudDsKICAgICAgcmV0dXJuIGFQcm9kdWN0LmF2YWlsYWJsZUludmVudG9yeSA+IHRoaXMuY2FydENvdW50KGFQcm9kdWN0LmlkKTsKICAgIH0sCiAgICBjYXJ0Q291bnQ6IGZ1bmN0aW9uIGNhcnRDb3VudChpZCkgewogICAgICB2YXIgY291bnQgPSAwOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNhcnQubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5jYXJ0W2ldID09PSBpZCkgewogICAgICAgICAgY291bnQrKzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBjb3VudDsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjYXJ0SXRlbUNvdW50OiBmdW5jdGlvbiBjYXJ0SXRlbUNvdW50KCkgewogICAgICByZXR1cm4gdGhpcy5jYXJ0Lmxlbmd0aCB8fCAiIjsKICAgIH0sCiAgICBzb3J0ZWRQcm9kdWN0czogZnVuY3Rpb24gc29ydGVkUHJvZHVjdHMoKSB7CiAgICAgIGlmICh0aGlzLnByb2R1Y3RzLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUoYSwgYikgewogICAgICAgICAgaWYgKGEudGl0bGUudG9Mb3dlckNhc2UoKSA8IGIudGl0bGUudG9Mb3dlckNhc2UoKSkgcmV0dXJuIC0xOwogICAgICAgICAgaWYgKGEudGl0bGUudG9Mb3dlckNhc2UoKSA+IGIudGl0bGUudG9Mb3dlckNhc2UoKSkgcmV0dXJuIDE7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9OwoKICAgICAgICB2YXIgcHJvZHVjdHNBcnJheSA9IHRoaXMucHJvZHVjdHMuc2xpY2UoMCk7CiAgICAgICAgcmV0dXJuIHByb2R1Y3RzQXJyYXkuc29ydChjb21wYXJlKTsKICAgICAgfQogICAgfQogIH0sCiAgZmlsdGVyczogewogICAgZm9ybWF0UHJpY2U6IGZ1bmN0aW9uIGZvcm1hdFByaWNlKHByaWNlKSB7CiAgICAgIGlmICghcGFyc2VJbnQocHJpY2UpKSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CgogICAgICBpZiAocHJpY2UgPiA5OTk5OSkgewogICAgICAgIHZhciBwcmljZVN0cmluZyA9IChwcmljZSAvIDEwMCkudG9GaXhlZCgyKTsKICAgICAgICB2YXIgcHJpY2VBcnJheSA9IHByaWNlU3RyaW5nLnNwbGl0KCIiKS5yZXZlcnNlKCk7CiAgICAgICAgdmFyIGluZGV4ID0gMzsKCiAgICAgICAgd2hpbGUgKHByaWNlQXJyYXkubGVuZ3RoID4gaW5kZXggKyAzKSB7CiAgICAgICAgICBwcmljZUFycmF5LnNwbGljZShpbmRleCArIDMsIDAsICIsIik7CiAgICAgICAgICBpbmRleCArPSA0OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHByaWNlQXJyYXkucmV2ZXJzZSgpLmpvaW4oIiIpICsgIiDigr0iOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAocHJpY2UgLyAxMDApLnRvRml4ZWQoMikgKyAiIOKCvSI7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGF4aW9zLmdldCgiL3N0YXRpYy9wcm9kdWN0cy5qc29uIikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMucHJvZHVjdHMgPSByZXNwb25zZS5kYXRhLnByb2R1Y3RzOwogICAgICBjb25zb2xlLmxvZyhfdGhpcy5wcm9kdWN0cyk7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["Main.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <my-header :cartItemCount=\"cartItemCount\"></my-header>\n\n    <main>\n      <div v-for=\"product in sortedProducts\">\n        <div class=\"row\">\n          <div class=\"col-md-5 col-md-offset-0\">\n            <figure>\n              <img class=\"product\" v-bind:src=\"product.image\" />\n            </figure>\n          </div>\n\n          <div class=\"col-md-6 col-md-offset-0 description\">\n            <router-link\n              tag=\"h1\"\n              :to=\"{ name: 'Id', params: { id: product.id } }\"\n              class=\"pointer\"\n              >{{ product.title }}</router-link\n            >\n            <p v-html=\"product.description\"></p>\n            <p class=\"price\">\n              {{ product.price | formatPrice }}\n            </p>\n            <button\n              v-if=\"canAddToCart(product)\"\n              v-on:click=\"addToCart(product)\"\n              class=\" btn btn-primary btn-lg\"\n            >\n              Добавить\n            </button>\n            <button disabled=\"true\" class=\" btn btn-primary btn-lg\" v-else>\n              Добавить\n            </button>\n\n            <span\n              v-if=\"product.availableInventory - cartCount(product.id) === 0\"\n              class=\"inventory-message\"\n              >Товара нет!\n            </span>\n            <span\n              v-else-if=\"product.availableInventory - cartCount(product.id) < 5\"\n              class=\"inventory-message\"\n            >\n              Осталось\n              {{ product.availableInventory - cartCount(product.id) }} !\n            </span>\n            <span v-else class=\"inventory-message\">Купить сейчас! </span>\n\n            <div class=\"rating\">\n              <span\n                v-for=\"n in 5\"\n                v-bind:class=\"{ 'rating-active': checkRating(n, product) }\"\n                >☆\n              </span>\n            </div>\n          </div>\n          <!-- end of col-md-6-->\n        </div>\n        <!-- end of row-->\n        <hr />\n      </div>\n      <!-- end of v-for-->\n    </main>\n  </div>\n</template>\n\n<script>\nimport MyHeader from \"./Header.vue\";\nexport default {\n  name: \"imain\",\n  data() {\n    return {\n      products: {},\n      cart: []\n    };\n  },\n  components: { MyHeader },\n  methods: {\n    checkRating(n, myProduct) {\n      return myProduct.rating - n >= 0;\n    },\n    addToCart(aProduct) {\n      this.cart.push(aProduct.id);\n    },\n    canAddToCart(aProduct) {\n      //return this.product.availableInventory > this.cartItemCount;\n      return aProduct.availableInventory > this.cartCount(aProduct.id);\n    },\n    cartCount(id) {\n      let count = 0;\n      for (var i = 0; i < this.cart.length; i++) {\n        if (this.cart[i] === id) {\n          count++;\n        }\n      }\n      return count;\n    }\n  },\n  computed: {\n    cartItemCount() {\n      return this.cart.length || \"\";\n    },\n    sortedProducts() {\n      if (this.products.length > 0) {\n        let productsArray = this.products.slice(0);\n        function compare(a, b) {\n          if (a.title.toLowerCase() < b.title.toLowerCase()) return -1;\n          if (a.title.toLowerCase() > b.title.toLowerCase()) return 1;\n          return 0;\n        }\n        return productsArray.sort(compare);\n      }\n    }\n  },\n  filters: {\n    formatPrice(price) {\n      if (!parseInt(price)) {\n        return \"\";\n      }\n      if (price > 99999) {\n        var priceString = (price / 100).toFixed(2);\n        var priceArray = priceString.split(\"\").reverse();\n        var index = 3;\n        while (priceArray.length > index + 3) {\n          priceArray.splice(index + 3, 0, \",\");\n          index += 4;\n        }\n        return priceArray.reverse().join(\"\") + \" ₽\";\n      } else {\n        return (price / 100).toFixed(2) + \" ₽\";\n      }\n    }\n  },\n  created: function() {\n    axios.get(\"/static/products.json\").then(response => {\n      this.products = response.data.products;\n      console.log(this.products);\n    });\n  }\n};\n</script>\n\n<style scoped></style>\n"],"sourceRoot":"src/components"}]}