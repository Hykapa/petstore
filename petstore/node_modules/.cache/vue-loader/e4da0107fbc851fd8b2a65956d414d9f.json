{"remainingRequest":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Hykapa\\Desktop\\new\\petstore\\src\\components\\Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\src\\components\\Main.vue","mtime":1648809483264},{"path":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648803307753},{"path":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\babel-loader\\lib\\index.js","mtime":1648803309109},{"path":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648803307753},{"path":"C:\\Users\\Hykapa\\Desktop\\new\\petstore\\node_modules\\vue-loader\\lib\\index.js","mtime":1648803309291}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNeUhlYWRlciBmcm9tICIuL0hlYWRlci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImltYWluIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJvZHVjdHM6IHt9LAogICAgICBjYXJ0OiBbXQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsgTXlIZWFkZXIgfSwKICBtZXRob2RzOiB7CiAgICBjaGVja1JhdGluZyhuLCBteVByb2R1Y3QpIHsKICAgICAgcmV0dXJuIG15UHJvZHVjdC5yYXRpbmcgLSBuID49IDA7CiAgICB9LAogICAgYWRkVG9DYXJ0KGFQcm9kdWN0KSB7CiAgICAgIHRoaXMuY2FydC5wdXNoKGFQcm9kdWN0LmlkKTsKICAgIH0sCiAgICBjYW5BZGRUb0NhcnQoYVByb2R1Y3QpIHsKICAgICAgLy9yZXR1cm4gdGhpcy5wcm9kdWN0LmF2YWlsYWJsZUludmVudG9yeSA+IHRoaXMuY2FydEl0ZW1Db3VudDsKICAgICAgcmV0dXJuIGFQcm9kdWN0LmF2YWlsYWJsZUludmVudG9yeSA+IHRoaXMuY2FydENvdW50KGFQcm9kdWN0LmlkKTsKICAgIH0sCiAgICBjYXJ0Q291bnQoaWQpIHsKICAgICAgbGV0IGNvdW50ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNhcnQubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5jYXJ0W2ldID09PSBpZCkgewogICAgICAgICAgY291bnQrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGNvdW50OwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNhcnRJdGVtQ291bnQoKSB7CiAgICAgIHJldHVybiB0aGlzLmNhcnQubGVuZ3RoIHx8ICIiOwogICAgfSwKICAgIHNvcnRlZFByb2R1Y3RzKCkgewogICAgICBpZiAodGhpcy5wcm9kdWN0cy5sZW5ndGggPiAwKSB7CiAgICAgICAgbGV0IHByb2R1Y3RzQXJyYXkgPSB0aGlzLnByb2R1Y3RzLnNsaWNlKDApOwogICAgICAgIGZ1bmN0aW9uIGNvbXBhcmUoYSwgYikgewogICAgICAgICAgaWYgKGEudGl0bGUudG9Mb3dlckNhc2UoKSA8IGIudGl0bGUudG9Mb3dlckNhc2UoKSkgcmV0dXJuIC0xOwogICAgICAgICAgaWYgKGEudGl0bGUudG9Mb3dlckNhc2UoKSA+IGIudGl0bGUudG9Mb3dlckNhc2UoKSkgcmV0dXJuIDE7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHByb2R1Y3RzQXJyYXkuc29ydChjb21wYXJlKTsKICAgICAgfQogICAgfQogIH0sCiAgZmlsdGVyczogewogICAgZm9ybWF0UHJpY2UocHJpY2UpIHsKICAgICAgaWYgKCFwYXJzZUludChwcmljZSkpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgICAgaWYgKHByaWNlID4gOTk5OTkpIHsKICAgICAgICB2YXIgcHJpY2VTdHJpbmcgPSAocHJpY2UgLyAxMDApLnRvRml4ZWQoMik7CiAgICAgICAgdmFyIHByaWNlQXJyYXkgPSBwcmljZVN0cmluZy5zcGxpdCgiIikucmV2ZXJzZSgpOwogICAgICAgIHZhciBpbmRleCA9IDM7CiAgICAgICAgd2hpbGUgKHByaWNlQXJyYXkubGVuZ3RoID4gaW5kZXggKyAzKSB7CiAgICAgICAgICBwcmljZUFycmF5LnNwbGljZShpbmRleCArIDMsIDAsICIsIik7CiAgICAgICAgICBpbmRleCArPSA0OwogICAgICAgIH0KICAgICAgICByZXR1cm4gcHJpY2VBcnJheS5yZXZlcnNlKCkuam9pbigiIikgKyAiIOKCvSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIChwcmljZSAvIDEwMCkudG9GaXhlZCgyKSArICIg4oK9IjsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24oKSB7CiAgICBheGlvcy5nZXQoIi9zdGF0aWMvcHJvZHVjdHMuanNvbiIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICB0aGlzLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YS5wcm9kdWN0czsKICAgICAgY29uc29sZS5sb2codGhpcy5wcm9kdWN0cyk7CiAgICB9KTsKICB9Cn07Cg=="},{"version":3,"sources":["Main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Main.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <my-header :cartItemCount=\"cartItemCount\"></my-header>\n\n    <main>\n      <div v-for=\"product in sortedProducts\">\n        <div class=\"row\">\n          <div class=\"col-md-5 col-md-offset-0\">\n            <figure>\n              <img class=\"product\" v-bind:src=\"product.image\" />\n            </figure>\n          </div>\n\n          <div class=\"col-md-6 col-md-offset-0 description\">\n            <router-link\n              tag=\"h1\"\n              :to=\"{ name: 'Id', params: { id: product.id } }\"\n              class=\"pointer\"\n              >{{ product.title }}</router-link\n            >\n            <p v-html=\"product.description\"></p>\n            <p class=\"price\">\n              {{ product.price | formatPrice }}\n            </p>\n            <button\n              v-if=\"canAddToCart(product)\"\n              v-on:click=\"addToCart(product)\"\n              class=\" btn btn-primary btn-lg\"\n            >\n              Добавить\n            </button>\n            <button disabled=\"true\" class=\" btn btn-primary btn-lg\" v-else>\n              Добавить\n            </button>\n\n            <span\n              v-if=\"product.availableInventory - cartCount(product.id) === 0\"\n              class=\"inventory-message\"\n              >Товара нет!\n            </span>\n            <span\n              v-else-if=\"product.availableInventory - cartCount(product.id) < 5\"\n              class=\"inventory-message\"\n            >\n              Осталось\n              {{ product.availableInventory - cartCount(product.id) }} !\n            </span>\n            <span v-else class=\"inventory-message\">Купить сейчас! </span>\n\n            <div class=\"rating\">\n              <span\n                v-for=\"n in 5\"\n                v-bind:class=\"{ 'rating-active': checkRating(n, product) }\"\n                >☆\n              </span>\n            </div>\n          </div>\n          <!-- end of col-md-6-->\n        </div>\n        <!-- end of row-->\n        <hr />\n      </div>\n      <!-- end of v-for-->\n    </main>\n  </div>\n</template>\n\n<script>\nimport MyHeader from \"./Header.vue\";\nexport default {\n  name: \"imain\",\n  data() {\n    return {\n      products: {},\n      cart: []\n    };\n  },\n  components: { MyHeader },\n  methods: {\n    checkRating(n, myProduct) {\n      return myProduct.rating - n >= 0;\n    },\n    addToCart(aProduct) {\n      this.cart.push(aProduct.id);\n    },\n    canAddToCart(aProduct) {\n      //return this.product.availableInventory > this.cartItemCount;\n      return aProduct.availableInventory > this.cartCount(aProduct.id);\n    },\n    cartCount(id) {\n      let count = 0;\n      for (var i = 0; i < this.cart.length; i++) {\n        if (this.cart[i] === id) {\n          count++;\n        }\n      }\n      return count;\n    }\n  },\n  computed: {\n    cartItemCount() {\n      return this.cart.length || \"\";\n    },\n    sortedProducts() {\n      if (this.products.length > 0) {\n        let productsArray = this.products.slice(0);\n        function compare(a, b) {\n          if (a.title.toLowerCase() < b.title.toLowerCase()) return -1;\n          if (a.title.toLowerCase() > b.title.toLowerCase()) return 1;\n          return 0;\n        }\n        return productsArray.sort(compare);\n      }\n    }\n  },\n  filters: {\n    formatPrice(price) {\n      if (!parseInt(price)) {\n        return \"\";\n      }\n      if (price > 99999) {\n        var priceString = (price / 100).toFixed(2);\n        var priceArray = priceString.split(\"\").reverse();\n        var index = 3;\n        while (priceArray.length > index + 3) {\n          priceArray.splice(index + 3, 0, \",\");\n          index += 4;\n        }\n        return priceArray.reverse().join(\"\") + \" ₽\";\n      } else {\n        return (price / 100).toFixed(2) + \" ₽\";\n      }\n    }\n  },\n  created: function() {\n    axios.get(\"/static/products.json\").then(response => {\n      this.products = response.data.products;\n      console.log(this.products);\n    });\n  }\n};\n</script>\n\n<style scoped></style>\n"]}]}